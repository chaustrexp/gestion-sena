<?php require_once __DIR__ . '/../../model/AsignacionModel.php'; require_once __DIR__ . '/../../model/FichaModel.php'; require_once __DIR__ . '/../../model/InstructorModel.php'; require_once __DIR__ . '/../../model/AmbienteModel.php'; require_once __DIR__ . '/../../model/CompetenciaModel.php'; $model = new AsignacionModel(); $fichaModel = new FichaModel(); $instructorModel = new InstructorModel(); $ambienteModel = new AmbienteModel(); $competenciaModel = new CompetenciaModel(); $fichas = $fichaModel->getAll(); $instructores = $instructorModel->getAll(); $ambientes = $ambienteModel->getAll(); $competencias = $competenciaModel->getAll(); $id = $_GET['id']; $registro = $model->getById($id); if ($_SERVER['REQUEST_METHOD'] === 'POST') { $model->update($id, $_POST); header('Location: index.php?msg=actualizado'); exit; } $pageTitle = "Editar Asignación"; include __DIR__ . '/../layout/header.php'; include __DIR__ . '/../layout/sidebar.php'; ?>
<div class="main-content"><div class="form-container"><h2>Editar Asignación</h2><form method="POST"><div class="form-group"><label>Ficha *</label><select name="ficha_id" class="form-control" required><option value="">Seleccione...</option><?php foreach ($fichas as $ficha): ?><option value="<?php echo $ficha['id']; ?>" <?php echo $registro['ficha_id'] == $ficha['id'] ? 'selected' : ''; ?>><?php echo $ficha['numero']; ?></option><?php endforeach; ?></select></div><div class="form-group"><label>Instructor *</label><select name="instructor_id" class="form-control" required><option value="">Seleccione...</option><?php foreach ($instructores as $instructor): ?><option value="<?php echo $instructor['id']; ?>" <?php echo $registro['instructor_id'] == $instructor['id'] ? 'selected' : ''; ?>><?php echo $instructor['nombre']; ?></option><?php endforeach; ?></select></div><div class="form-group"><label>Ambiente</label><select name="ambiente_id" class="form-control"><option value="">Seleccione...</option><?php foreach ($ambientes as $ambiente): ?><option value="<?php echo $ambiente['id']; ?>" <?php echo $registro['ambiente_id'] == $ambiente['id'] ? 'selected' : ''; ?>><?php echo $ambiente['nombre']; ?></option><?php endforeach; ?></select></div><div class="form-group"><label>Competencia</label><select name="competencia_id" class="form-control"><option value="">Seleccione...</option><?php foreach ($competencias as $competencia): ?><option value="<?php echo $competencia['id']; ?>" <?php echo $registro['competencia_id'] == $competencia['id'] ? 'selected' : ''; ?>><?php echo $competencia['nombre']; ?></option><?php endforeach; ?></select></div><div class="form-group"><label>Fecha Inicio *</label><input type="date" name="fecha_inicio" class="form-control" value="<?php echo $registro['fecha_inicio']; ?>" required></div><div class="form-group"><label>Fecha Fin *</label><input type="date" name="fecha_fin" class="form-control" value="<?php echo $registro['fecha_fin']; ?>" required></div><div class="btn-group"><button type="submit" class="btn btn-primary">Actualizar</button><a href="index.php" class="btn btn-secondary">Cancelar</a></div></form></div></div><?php include __DIR__ . '/../layout/footer.php'; ?>
